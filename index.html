<!doctype html>
<html lang="no">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Operasjon Stjernenatt — ELVES Intelligence</title>
  <meta name="description" content="Operasjon Stjernenatt — Field Brief from ELVES Intelligence" />
  <meta name="theme-color" content="#f4f2ec" />

  <!-- iOS PWA -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <link rel="apple-touch-icon" href="/icons/icon-192.png" />

  <!-- Manifest -->
  <link rel="manifest" href="/manifest.webmanifest" />

  <!-- Cold War dossier font -->
  <link href="https://fonts.googleapis.com/css2?family=Special+Elite&display=swap" rel="stylesheet">

  <!-- Global styles -->
  <link rel="stylesheet" href="/style.css" />
</head>
<body>
  <!-- Topp -->
  <header class="topbar">
    <h1>Operasjon Stjernenatt</h1>
    <p class="sub">ELVES INTELLIGENCE // CLASSIFIED DOSSIER</p>
  </header>

  <!-- Kalender -->
  <main class="container">
    <section id="calendar" class="grid" aria-label="Kalender 1–24"></section>
    <section class="progress" id="progress"></section>
  </main>

  <!-- Modal / Oppdragsark -->
  <div id="modal" class="modal hidden" aria-hidden="true">
    <div class="sheet" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <button class="close" id="closeModal" aria-label="Lukk">✖</button>
      <h2 id="modalTitle">Oppdrag</h2>
      <p id="mission"></p>

      <!-- Media (video/lyd/bilde/YT/Vimeo) -->
      <div id="media"></div>

      <!-- GATE: dagkode før innhold (valgfritt per dag via app.js) -->
      <div class="answerbox hidden" id="gateBox">
        <label for="gateInput" id="gatePrompt">Skriv dagens feltkode</label>
        <input id="gateInput" placeholder="Kode fra konvolutt" />
        <div style="display:flex; gap:8px; margin-top:8px;">
          <button id="submitGate">Lås opp</button>
          <button id="cancelGate" class="ghost" type="button">Avbryt</button>
        </div>
        <p id="gateHint" style="color:var(--muted); font-size:12px; margin-top:8px;"></p>
      </div>

      <!-- Oppgaveliste -->
      <div class="taskbox" aria-labelledby="tasksLabel">
        <p class="label" id="tasksLabel">Oppgaver</p>
        <ul id="tasks"></ul>
      </div>

      <!-- Svarfelt -->
      <div class="answerbox" id="answerBox">
        <label for="answer">Skriv kode / svar</label>
        <input id="answer" placeholder="f.eks. LYS eller 735" />
        <button id="submitAnswer">Bekreft</button>
      </div>

      <!-- Belønning -->
      <div class="reward hidden" id="reward"></div>
    </div>
  </div>

  <!-- Bunn -->
  <footer class="foot">
    <p>© <span id="yr"></span> ELVES INTELLIGENCE — PWA</p>
  </footer>

  <!-- App-kode -->
  <script src="/app.js"></script>

  <!-- Init småverdier -->
  <script>
    document.getElementById('yr').textContent = new Date().getFullYear();
  </script>

  <!-- Service Worker -->
  <script>
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", () => {
        navigator.serviceWorker.register("/service-worker.js");
      });
    }
  </script>
</body>
</html>
